Thingiverse.ImageEdit=function(opts){if(!opts||typeof opts!=='object'){opts={};}
this.settings=$.extend(true,{},this.defaultSettings,opts);this.init();return this;};Thingiverse.ImageEdit.prototype.defaultSettings={$container:$('.img-wrapper'),$editTrigger:null,$uploadContainer:null,$iframe:null,formFileBttn:{external:'#upload-container',target:'#file',type:'div',style:'inline-btn',html:'<span id="upload_msg">Upload Your Own</span>'},complete:null};Thingiverse.ImageEdit.prototype.init=function(){var self=this;if(self.settings.$uploadContainer===null){self.settings.$uploadContainer=self.settings.$container.next('.inline-upload');}
if(self.settings.$iframe===null){self.settings.$iframe=self.settings.$uploadContainer.find('iframe');}
if(self.settings.$editTrigger===null){self.settings.$editTrigger=self.settings.$container.find('.edit-photo');}
self.settings.$editTrigger.on('click',function(e){e.preventDefault();self.toggleUploadContainers();});$(document).on('imageUploaded',function(e,data){self.imageUploaded(e,data);});};Thingiverse.ImageEdit.prototype.toggleUploadContainers=function(){var self=this;self.settings.$uploadContainer.toggleClass('active');self.settings.$container.toggleClass('active');};Thingiverse.ImageEdit.prototype.hideUploadContainers=function(){var self=this;self.settings.$container.removeClass('active');self.settings.$uploadContainer.removeClass('active');};Thingiverse.ImageEdit.prototype.imageUploaded=function(e,data){var self=this;if(self.settings.$iframe){if(self.settings.$iframe.attr('id')===data.iframe_id){self.hideUploadContainers();}}
if(typeof self.settings.complete==='function'){self.settings.complete();}};